(()=>{const e=document.getElementById("imageUpload"),t=document.getElementById("gallery"),n=document.getElementById("selectedImage"),a=document.getElementById("widthInput"),o=document.getElementById("heightInput"),d=document.getElementById("resizeBtn");let r=null;function i(e){const a=document.createElement("img");a.src=e,a.addEventListener("click",(()=>{n.src=e,r=new Image,r.src=e})),t.appendChild(a)}const s=document.getElementById("errorMessage");e.addEventListener("change",(async e=>{s.textContent="";const t=e.target.files[0];if(!t)return;if(!t.name.toLowerCase().endsWith(".jpg")&&!t.name.toLowerCase().endsWith(".jpeg"))return void(s.textContent="Only .jpg and .jpeg files are allowed.");const n=new FormData;n.append("image",t);try{const e=await fetch("/upload",{method:"POST",body:n}),t=await e.json();if(!e.ok)return void(s.textContent=t.error||"Upload failed");i(`/images/${t.filename}`)}catch(e){s.textContent="Error uploading file"}})),d.addEventListener("click",(()=>{if(!r)return void alert("Please select an image to resize.");const e=parseInt(a.value),t=parseInt(o.value);if(isNaN(e)||isNaN(t)||e<=0||t<=0)return void alert("Please enter valid dimensions.");const d=document.createElement("canvas");d.width=e,d.height=t,d.getContext("2d").drawImage(r,0,0,e,t);const s=d.toDataURL();n.src=s,i(s)}))})();